<?xml version="1.0" encoding="utf-8"?>
<modification>
    <name>Custom HTML Module</name>
    <code>custom_html</code>
    <version>1.0.0</version>
    <author>Utility Libraries</author>
    <file path="admin/view/template/setting/setting.twig">
        <operation>
            <search><![CDATA[<li><a href="#tab-server" data-toggle="tab">{{ tab_server }}</a></li>]]></search>
            <add position="after"><![CDATA[<li><a href="#tab-custom-html" data-toggle="tab">Custom HTML</a></li>]]></add>
        </operation>
        <operation>
            <search><![CDATA[<div class="tab-content">]]></search>
            <add position="after"><![CDATA[<div id="tab-custom-html" class="tab-pane"><div class="form-group"><label class="col-sm-2 control-label" for="input-html">{{ entry_html }}</label><div class="col-sm-10"><textarea name="custom_html_html" rows="5" placeholder="{{ entry_html }}" id="input-html" class="form-control">{{ custom_html_html }}</textarea></div></div><div class="form-group"><label class="col-sm-2 control-label" for="input-page">{{ entry_page }}</label><div class="col-sm-10"><select name="custom_html_page" id="input-page" class="form-control"><option value="all" {{ custom_html_page == "all" ? "selected" : "" }}>{{ text_all_pages }}</option>{% for page in pages %}<option value="{{ page.name }}" {{ custom_html_page == page.name ? "selected" : "" }}>{{ page.name }}</option>{% endfor %}</select></div></div><div class="form-group"><label class="col-sm-2 control-label" for="input-position">{{ entry_position }}</label><div class="col-sm-10"><select name="custom_html_position" id="input-position" class="form-control"><option value="column_left" {{ custom_html_position == "column_left" ? "selected" : "" }}>{{ text_column_left }}</option><option value="column_right" {{ custom_html_position == "column_right" ? "selected" : "" }}>{{ text_column_right }}</option><option value="content_top" {{ custom_html_position == "content_top" ? "selected" : "" }}>{{ text_content_top }}</option><option value="content_bottom" {{ custom_html_position == "content_bottom" ? "selected" : "" }}>{{ text_content_bottom }}</option></select></div></div><button type="submit" form="form-custom-html" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button></div>]]></add>
        </operation>
    </file>
    <file path="admin/model/setting/setting.php">
        <operation>
            <search><![CDATA[class ModelSettingSetting extends Model {]]></search>
            <add position="after"><![CDATA[public function getPages() {$query = $this->db->query("SELECT name FROM " . DB_PREFIX . "layout");return $query->rows;}]]></add>
        </operation>
    </file>
    <file path="admin/controller/setting/setting.php">
        <operation>
            <search><![CDATA[$this->response->setOutput($this->load->view('setting/setting', $data));]]></search>
            <add position="before"><![CDATA[$this->load->model('setting/setting');$data['pages'] = $this->model_setting_setting->getPages();$data['custom_html_html'] = $this->config->get('custom_html_html');$data['custom_html_page'] = $this->config->get('custom_html_page');$data['custom_html_position'] = $this->config->get('custom_html_position');]]></add>
        </operation>
    </file>
    <file path="admin/controller/setting/setting.php">
        <operation>
            <search><![CDATA[$this->model_setting_setting->editSetting('config', $this->request->post);]]></search>
            <add position="after"><![CDATA[$this->model_setting_setting->editSetting('custom_html', ['custom_html_html' => $this->request->post['custom_html_html'],'custom_html_page' => $this->request->post['custom_html_page'],'custom_html_position' => $this->request->post['custom_html_position']]);]]></add>
        </operation>
    </file>
    <file path="catalog/controller/common/column_left.php">
        <operation>
            <search><![CDATA[return $this->load->view('common/column_left', $data);]]></search>
            <add position="before"><![CDATA[$custom_html_html = $this->config->get('custom_html_html');$custom_html_page = $this->config->get('custom_html_page');$custom_html_position = $this->config->get('custom_html_position');$normalize_select_page = strtolower($custom_html_page);$is_all_page = $normalize_select_page == 'all';$is_home_page = !isset($this->request->get['route']) && $normalize_select_page === 'home';$is_select_page = !$is_home_page && strpos($this->request->get['route'], $normalize_select_page) !== false;$is_adding_html = $is_all_page || $is_home_page || $is_select_page;if ($custom_html_position === 'column_left' && $is_adding_html) {$data['modules'][] = html_entity_decode($custom_html_html, ENT_QUOTES, 'UTF-8');}]]></add>
        </operation>
    </file>

    <file path="catalog/controller/common/column_right.php">
        <operation>
            <search><![CDATA[return $this->load->view('common/column_right', $data);]]></search>
            <add position="before"><![CDATA[$custom_html_html = $this->config->get('custom_html_html');$custom_html_page = $this->config->get('custom_html_page');$custom_html_position = $this->config->get('custom_html_position');$normalize_select_page = strtolower($custom_html_page);$is_all_page = $normalize_select_page == 'all';$is_home_page = !isset($this->request->get['route']) && $normalize_select_page === 'home';$is_select_page = !$is_home_page && strpos($this->request->get['route'], $normalize_select_page) !== false;$is_adding_html = $is_all_page || $is_home_page || $is_select_page;if ($custom_html_position === 'column_right' && $is_adding_html) {$data['modules'][] = html_entity_decode($custom_html_html, ENT_QUOTES, 'UTF-8');}]]></add>
        </operation>
    </file>
    <file path="catalog/controller/common/content_top.php">
        <operation>
            <search><![CDATA[return $this->load->view('common/content_top', $data);]]></search>
            <add position="before"><![CDATA[$custom_html_html = $this->config->get('custom_html_html');$custom_html_page = $this->config->get('custom_html_page');$custom_html_position = $this->config->get('custom_html_position');$normalize_select_page = strtolower($custom_html_page);$is_all_page = $normalize_select_page == 'all';$is_home_page = !isset($this->request->get['route']) && $normalize_select_page === 'home';$is_select_page = !$is_home_page && strpos($this->request->get['route'], $normalize_select_page) !== false;$is_adding_html = $is_all_page || $is_home_page || $is_select_page;if ($custom_html_position === 'content_top' && $is_adding_html) {$data['modules'][] = html_entity_decode($custom_html_html, ENT_QUOTES, 'UTF-8');}]]></add>
        </operation>
    </file>
    <file path="catalog/controller/common/content_bottom.php">
        <operation>
            <search><![CDATA[return $this->load->view('common/content_bottom', $data);]]></search>
            <add position="before"><![CDATA[$custom_html_html = $this->config->get('custom_html_html');$custom_html_page = $this->config->get('custom_html_page');$custom_html_position = $this->config->get('custom_html_position');$normalize_select_page = strtolower($custom_html_page);$is_all_page = $normalize_select_page == 'all';$is_home_page = !isset($this->request->get['route']) && $normalize_select_page === 'home';$is_select_page = !$is_home_page && strpos($this->request->get['route'], $normalize_select_page) !== false;$is_adding_html = $is_all_page || $is_home_page || $is_select_page;if ($custom_html_position === 'content_bottom' && $is_adding_html) {$data['modules'][] = html_entity_decode($custom_html_html, ENT_QUOTES, 'UTF-8');}]]></add>
        </operation>
    </file>
    <file path="admin/language/en-gb/setting/setting.php">
        <operation>
            <search><![CDATA[$_['entry_status']]]></search>
            <add position="after"><![CDATA[$_['entry_html'] = 'Custom HTML';$_['entry_page'] = 'Select Page';$_['entry_position'] = 'Position';$_['text_all_pages'] = 'All Pages';$_['text_column_left'] = 'Column Left';$_['text_column_right'] = 'Column Right';$_['text_content_top'] = 'Content Top';$_['text_content_bottom'] = 'Content Bottom';$_['button_save'] = 'Save';]]></add>
        </operation>
    </file>
</modification>